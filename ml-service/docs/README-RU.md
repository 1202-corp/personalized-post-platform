# ML Service - Сервис машинного обучения

ML сервис для персонализированных рекомендаций постов.

## Обзор

Этот сервис обрабатывает все операции машинного обучения:
- Генерация эмбеддингов постов
- Вычисление векторов предпочтений пользователей
- Кластеризация постов для оптимизированного поиска
- Генерация рекомендаций с использованием векторного поиска
- Ранжирование на основе LLM

## API Endpoints

### ML Операции
- `POST /api/v1/ml/train` - Обучение ML модели для пользователя
- `POST /api/v1/ml/predict` - Получение оценок релевантности для постов
- `POST /api/v1/ml/recommendations` - Получение персонализированных рекомендаций
- `GET /api/v1/ml/eligibility/{telegram_id}` - Проверка готовности к обучению

### Управление кластерами
- `POST /api/v1/clusters/recalculate` - Пересчет кластеров постов
- `GET /api/v1/clusters/stats` - Статистика по кластерам

## Конфигурация

Переменные окружения:
- `DATABASE_URL` - Строка подключения к PostgreSQL (чтение/запись)
- `OPENAI_API_BASE` - Базовый URL OpenAI-совместимого API
- `OPENAI_API_KEY` - API ключ для генерации эмбеддингов
- `QDRANT_HOST` - Хост векторной БД Qdrant
- `QDRANT_PORT` - Порт Qdrant

## Архитектура

- Использует PostgreSQL для чтения/записи данных пользователей и постов
- Использует Qdrant для хранения и поиска эмбеддингов постов
- Генерирует эмбеддинги через OpenAI-совместимый API
- Реализует кластеризацию для оптимизации производительности поиска

